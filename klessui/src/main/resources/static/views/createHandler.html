<div ng-controller="CreateHandlerController">

	<md-content layout-padding>
    
	      <md-card>
    
		    <ng-form name="createHandlerForm">
		    
			<div layout="row" layout-padding>
			  <div flex="35">
  
				    <h2>Handler information</h2>
				    
			        <md-input-container class="md-block">
			          <label>Name</label>
			          <input ng-model="newHandler.name" required ng-minlength='3' ng-maxlength='25' ng-pattern='/^[a-z0-9]{3,25}$/'>
			        </md-input-container>
	
			        <md-input-container class="md-block">
			          <label>Builder</label>
			          <!-- 
			          <input ng-model="newHandler.builder">
			           -->
	                  <md-select ng-model="newHandler.builder" required>
			            <md-option ng-repeat="builder in builders" ng-value="builder.eventHandlerBuilderName">
			              {{builder.eventHandlerBuilderName}}
			            </md-option>
			          </md-select>
			        </md-input-container>
			        
			        <md-input-container class="md-block">
			          <label>Frontend</label>
			          <!-- 
			          <input ng-model="newHandler.frontend">
			          -->
			          <md-select ng-model="newHandler.frontend" required>
			            <md-option ng-repeat="frontend in frontends" ng-value="frontend.eventHandlerFrontendName">
			              {{frontend.eventHandlerFrontendName}}
			            </md-option>
			          </md-select>
			        </md-input-container>
			        
			        <md-input-container class="md-block">
			          <label>Version</label>
			          <input ng-model="newHandler.version">
			        </md-input-container>
			        		        		        		        	    
			        <md-input-container class="md-block">
			          <label>Namespace</label>
			          <input ng-model="newHandler.namespace">
			        </md-input-container> 
	
			        <md-input-container class="md-block">
			          <label>Comment</label>
			          <input ng-model="newHandler.comment">
			        </md-input-container> 
	
				    <h2>Dependencies:</h2>
				    
				    <textarea ng-model="newHandler.dependencies" style="width: 100%; height: 150px;"></textarea>
				    
				    <md-button class="md-raised md-primary" id="createHandlerButton" ng-click="createHandler(newHandler)">Create</md-button>
				    <a ui-sref="handlers" class="md-button md-raised md-primary">Cancel</a>
				    
			  </div>				    
			
			  <div flex="65" layout="column">				   		    			    
					
					<div layout="row" layout-padding layout-align="space-between center">
					
					    <h2>Source code:</h2>
					    
					    <label>Editor language:</label>
					    
					    <md-select ng-model="currentEditorlanguage" ng-change="changeEditorLanguage()">
				            <md-option ng-repeat="language in editorLanguages" ng-value="language">
				              {{language}}
				            </md-option>
				          </md-select>
				          
			        </div>
			        
			        <div>
			          
						<div ui-ace="{
					       useWrapMode : true,
					       showGutter: true,
					       theme:'twilight',
					       mode: 'java',
                           onLoad: aceLoaded
					       }" ng-model="newHandler.sourceCode" style="height: 600px;"></div>
					       
					    <md-button class="md-raised md-primary" id="createEmptyHandlerButton" ng-click="createEmptyHandler()">Empty handler</md-button>
					
					</div>
					
			  	</div>
			</div>
  			
		     </ng-form>
		
		</md-card>
		
	</md-content>

</div>